let gambar1_lingkaran = [
  0, 0.2, 0, -0.02, 0.1, -0.02,

  0, 0.2, 0.1, -0.02, 0.175, -0.02,

  0, 0.2, 0.175, -0.02, 0.25, 0,

  0, 0.2, 0.25, 0, 0.3, 0.01,

  0, 0.2, 0.3, 0.01, 0.35, 0.02,

  0, 0.2, 0.35, 0.02, 0.42, 0.03,

  0, 0.2, 0.4075, 0.035, 0.46, 0.06,

  0, 0.2, 0.49, 0.09, 0.45, 0.063,

  0, 0.2, 0.2, 0.39, 0.12, 0.41,

  0, 0.2, 0, 0.41, 0.12, 0.41,

  0, 0.2, 0.32, 0.34, 0.2, 0.39,

  0, 0.2, 0.38, 0.3, 0.32, 0.34,

  0, 0.2, 0.47, 0.215, 0.38, 0.3,

  0, 0.2, 0.48, 0.185, 0.46, 0.23,

  0, 0.2, 0.49, 0.15, 0.48, 0.19,

  0, 0.2, 0.49, 0.09, 0.49, 0.15,

  0, 0.2, 0, -0.02, -0.1, -0.02,

  0, 0.2, -0.1, -0.02, -0.175, -0.02,

  0, 0.2, -0.175, -0.02, -0.25, 0,

  0, 0.2, -0.25, 0, -0.3, 0.01,

  0, 0.2, -0.3, 0.01, -0.35, 0.02,

  0, 0.2, -0.35, 0.02, -0.42, 0.03,

  0, 0.2, -0.4075, 0.035, -0.46, 0.06,

  0, 0.2, -0.49, 0.09, -0.45, 0.063,

  // Lingkaran Kiri Atas
  0, 0.2, -0.2, 0.39, -0.12, 0.41,

  0, 0.2, 0, 0.41, -0.12, 0.41,

  0, 0.2, -0.32, 0.34, -0.2, 0.39,

  0, 0.2, -0.38, 0.3, -0.32, 0.34,

  0, 0.2, -0.47, 0.215, -0.38, 0.3,

  0, 0.2, -0.48, 0.185, -0.46, 0.23,

  0, 0.2, -0.49, 0.15, -0.48, 0.19,

  -0, 0.2, -0.49, 0.09, -0.49, 0.15,
];

let gambar1_selimut = [
  // Badan Kiri
  0, -0.02, 0, -0.47, -0.1, -0.46,

  -0.1, -0.02, 0, -0.02, -0.1, -0.46,

  -0.1, -0.02, -0.1, -0.46, -0.2, -0.43,

  -0.17, -0.015, -0.1, -0.02, -0.2, -0.43,

  -0.17, -0.015, -0.2, -0.43, -0.25, -0.4,

  -0.25, 0, -0.17, -0.015, -0.25, -0.4,

  -0.25, 0, -0.25, -0.4, -0.3, -0.37,

  -0.3, 0.01, -0.25, 0, -0.3, -0.37,

  -0.3, 0.01, -0.3, -0.37, -0.35, -0.33,

  -0.35, 0.02, -0.3, 0.01, -0.35, -0.33,

  -0.35, 0.02, -0.35, -0.33, -0.4, -0.27,

  -0.4, 0.04, -0.35, 0.02, -0.4, -0.27,

  -0.4, 0.04, -0.4, -0.27, -0.45, -0.21,

  -0.45, 0.065, -0.4, 0.04, -0.45, -0.21,

  -0.45, 0.065, -0.45, -0.21, -0.48, -0.12,

  -0.45, 0.065, -0.45, -0.21, -0.48, -0.12,

  -0.45, 0.065, -0.49, 0.09, -0.48, -0.12,

  // Badan Kanan
  0, -0.02, 0, -0.47, 0.1, -0.46,

  0.1, -0.02, 0, -0.02, 0.1, -0.46,

  0.1, -0.02, 0.1, -0.46, 0.2, -0.43,

  0.17, -0.015, 0.1, -0.02, 0.2, -0.43,

  0.17, -0.015, 0.2, -0.43, 0.25, -0.4,

  0.25, 0, 0.17, -0.015, 0.25, -0.4,

  0.25, 0, 0.25, -0.4, 0.3, -0.37,

  0.3, 0.01, 0.25, 0, 0.3, -0.37,

  0.3, 0.01, 0.3, -0.37, 0.35, -0.33,

  0.35, 0.02, 0.3, 0.01, 0.35, -0.33,

  0.35, 0.02, 0.35, -0.33, 0.4, -0.27,

  0.4, 0.04, 0.35, 0.02, 0.4, -0.27,

  0.4, 0.04, 0.4, -0.27, 0.45, -0.21,

  0.45, 0.065, 0.4, 0.04, 0.45, -0.21,

  0.45, 0.065, 0.45, -0.21, 0.48, -0.12,

  0.45, 0.015, 0.45, -0.21, 0.48, -0.12,

  0.45, 0.065, 0.49, 0.09, 0.48, -0.12,
];

let gambar2_lingkaran = [
  0, 0.2, 0, -0.02, 0.1, -0.02,

  0, 0.2, 0.1, -0.02, 0.175, -0.02,

  0, 0.2, 0.175, -0.02, 0.25, 0,

  0, 0.2, 0.25, 0, 0.3, 0.01,

  0, 0.2, 0.3, 0.01, 0.35, 0.02,

  0, 0.2, 0.35, 0.02, 0.42, 0.03,

  0, 0.2, 0.4075, 0.035, 0.46, 0.06,

  0, 0.2, 0.49, 0.09, 0.45, 0.063,

  0, 0.2, 0.2, 0.39, 0.12, 0.41,

  0, 0.2, 0, 0.41, 0.12, 0.41,

  0, 0.2, 0.32, 0.34, 0.2, 0.39,

  0, 0.2, 0.38, 0.3, 0.32, 0.34,

  0, 0.2, 0.47, 0.215, 0.38, 0.3,

  0, 0.2, 0.48, 0.185, 0.46, 0.23,

  0, 0.2, 0.49, 0.15, 0.48, 0.19,

  0, 0.2, 0.49, 0.09, 0.49, 0.15,

  0, 0.2, 0, -0.02, -0.1, -0.02,

  0, 0.2, -0.1, -0.02, -0.175, -0.02,

  0, 0.2, -0.175, -0.02, -0.25, 0,

  0, 0.2, -0.25, 0, -0.3, 0.01,

  0, 0.2, -0.3, 0.01, -0.35, 0.02,

  0, 0.2, -0.35, 0.02, -0.42, 0.03,

  0, 0.2, -0.4075, 0.035, -0.46, 0.06,

  0, 0.2, -0.49, 0.09, -0.45, 0.063,

  // Lingkaran Kiri Atas
  0, 0.2, -0.2, 0.39, -0.12, 0.41,

  0, 0.2, 0, 0.41, -0.12, 0.41,

  0, 0.2, -0.32, 0.34, -0.2, 0.39,

  0, 0.2, -0.38, 0.3, -0.32, 0.34,

  0, 0.2, -0.47, 0.215, -0.38, 0.3,

  0, 0.2, -0.48, 0.185, -0.46, 0.23,

  0, 0.2, -0.49, 0.15, -0.48, 0.19,

  -0, 0.2, -0.49, 0.09, -0.49, 0.15,
];

let gambar2_selimut = [
  // Badan Kiri
  0, -0.02, 0, -0.47, -0.1, -0.46,

  -0.1, -0.02, 0, -0.02, -0.1, -0.46,

  -0.1, -0.02, -0.1, -0.46, -0.2, -0.43,

  -0.17, -0.015, -0.1, -0.02, -0.2, -0.43,

  -0.17, -0.015, -0.2, -0.43, -0.25, -0.4,

  -0.25, 0, -0.17, -0.015, -0.25, -0.4,

  -0.25, 0, -0.25, -0.4, -0.3, -0.37,

  -0.3, 0.01, -0.25, 0, -0.3, -0.37,

  -0.3, 0.01, -0.3, -0.37, -0.35, -0.33,

  -0.35, 0.02, -0.3, 0.01, -0.35, -0.33,

  -0.35, 0.02, -0.35, -0.33, -0.4, -0.27,

  -0.4, 0.04, -0.35, 0.02, -0.4, -0.27,

  -0.4, 0.04, -0.4, -0.27, -0.45, -0.21,

  -0.45, 0.065, -0.4, 0.04, -0.45, -0.21,

  -0.45, 0.065, -0.45, -0.21, -0.48, -0.12,

  -0.45, 0.065, -0.45, -0.21, -0.48, -0.12,

  -0.45, 0.065, -0.49, 0.09, -0.48, -0.12,

  // Badan Kanan
  0, -0.02, 0, -0.47, 0.1, -0.46,

  0.1, -0.02, 0, -0.02, 0.1, -0.46,

  0.1, -0.02, 0.1, -0.46, 0.2, -0.43,

  0.17, -0.015, 0.1, -0.02, 0.2, -0.43,

  0.17, -0.015, 0.2, -0.43, 0.25, -0.4,

  0.25, 0, 0.17, -0.015, 0.25, -0.4,

  0.25, 0, 0.25, -0.4, 0.3, -0.37,

  0.3, 0.01, 0.25, 0, 0.3, -0.37,

  0.3, 0.01, 0.3, -0.37, 0.35, -0.33,

  0.35, 0.02, 0.3, 0.01, 0.35, -0.33,

  0.35, 0.02, 0.35, -0.33, 0.4, -0.27,

  0.4, 0.04, 0.35, 0.02, 0.4, -0.27,

  0.4, 0.04, 0.4, -0.27, 0.45, -0.21,

  0.45, 0.065, 0.4, 0.04, 0.45, -0.21,

  0.45, 0.065, 0.45, -0.21, 0.48, -0.12,

  0.45, 0.015, 0.45, -0.21, 0.48, -0.12,

  0.45, 0.065, 0.49, 0.09, 0.48, -0.12,
];

function main() {
  var canvas = document.getElementById("myCanvas");
  var gl = canvas.getContext("webgl");

  var vertices = [
    ...gambar2_lingkaran,
    ...gambar2_selimut,
    ...gambar1_lingkaran,
    ...gambar1_selimut,
  ];

  var vertexBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

  var vertexShaderSource = `
		attribute vec2 aPosition;
    attribute vec4 a_color;
    varying vec4 v_color;
		uniform mat4 uChange;
	
		void main() {
			gl_Position = uChange * vec4(aPosition, 0, 1);
      v_color = a_color;
		}
	`;

  var fragmentShaderSource = `
		precision mediump float;
        varying vec4 v_color;

		void main() {
			gl_FragColor = v_color;
		}
	`;
  var vertexShader = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(vertexShader, vertexShaderSource);

  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  gl.shaderSource(fragmentShader, fragmentShaderSource);

  gl.compileShader(vertexShader);
  gl.compileShader(fragmentShader);

  var shaderProgram = gl.createProgram();
  gl.attachShader(shaderProgram, vertexShader);
  gl.attachShader(shaderProgram, fragmentShader);
  gl.linkProgram(shaderProgram);
  gl.useProgram(shaderProgram);

  var aPosition = gl.getAttribLocation(shaderProgram, "aPosition");
  var colorLocation = gl.getAttribLocation(shaderProgram, "a_color");
  var color = [];
  gl.vertexAttribPointer(aPosition, 2, gl.FLOAT, false, 0, 0);
  gl.enableVertexAttribArray(aPosition);

  //Karena gambar yang saya pakai transparan jadinya saya bingung kasih warna
  //Dan saya beri abu abu yang beragam tiap sisi
  
  for (let i = 6; i < gambar1_selimut.length / 2; i++) {
    color.push(0.55);
    color.push(0.55);
    color.push(0.55);
    color.push(1);
  }

  for (let i = -6; i < gambar1_lingkaran.length; i++) {
    color.push(0.35);
    color.push(0.35);
    color.push(0.35);
    color.push(1);
  }

  for (let i = 0; i < vertices.length / 2; i++) {
    color.push(0.75);
    color.push(0.75);
    color.push(0.75);
    color.push(1);
  }

  let colorBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(color), gl.STATIC_DRAW);
  gl.vertexAttribPointer(colorLocation, 4, gl.FLOAT, false, 0, 0);
  gl.enableVertexAttribArray(colorLocation);

  var change = 0;
  var speed = 0.0175;
  var uChange = gl.getUniformLocation(shaderProgram, "uChange");

  function render() {
    if (change >= 0.5 || change <= -0.5) {
      speed = -speed;
    }

    change = change + speed;
    const leftObject = [
      1.0, 0.0, 0.0, 0.0,
      0.0, 1.25, 0.0, 0.0,
      0.0, 0.0, 1.0, 0.0,
      -0.5, 0.0, 0.0, 1.0,
    ];

    const rightObject = [
      1.0, 0.0, 0.0, 0.0,
      0.0, 1.25, 0.0, 0.0,
      0.0, 0.0, 1.0, 0.0,
      0.5, change, 0.0, 1.0,
    ];

    gl.clearColor(0, 0, 0, 1);
    gl.clear(gl.COLOR_BUFFER_BIT);

    gl.uniformMatrix4fv(uChange, false, rightObject);
    gl.drawArrays(
      gl.TRIANGLES,
      0,
      (gambar2_lingkaran.length + gambar2_selimut.length) / 2
    );

    gl.uniformMatrix4fv(uChange, false, leftObject);
    gl.drawArrays(
      gl.TRIANGLES,
      (gambar2_lingkaran.length + gambar2_selimut.length) / 2,
      (gambar1_lingkaran.length + gambar1_selimut.length) / 2
    );

    requestAnimationFrame(render);
  }
  render();
}
